---
/**
 * File: src/pages/index.astro
 * Home â€“ CVWriting Kenya
 * Aligned to Pricing Plan implementation (4-tier packages surfaced on home).
 */

import BaseLayout from "@/components/layout/BaseLayout.astro";
import Hero from "@/components/sections/service/Hero/index.astro";
import FeatureList from "@/components/sections/service/FeatureList/index.astro";
import TestimonialStrip from "@/components/sections/shared/TestimonialStrip/index.astro";
import LeadCaptureBanner from "@/components/cta/LeadCaptureBanner/index.astro";
import StructuredData from "@/components/seo/StructuredData/index.astro";
import PricingTable from "@/components/plan/PricingTable/index.astro";
import StatStrip from "@/components/metrics/StatStrip/index.astro";
import testimonials from "@/data/testimonials.json";
import site from "@/site.config";

const title = "Professional CV Writing Services in Kenya";
const description =
  "Get more interviews with ATS-optimized CVs, cover letters and LinkedIn profiles tailored to the Kenyan job market.";

const seo = {
  canonical: "/",
  ogImage: "/assets/images/hero/hero-1.png",
};

const hero = {
  eyebrow: "CV Writing Kenya",
  title,
  sub: description,
  image: "/assets/images/hero/hero-1.png",
  alt: "Professional CV writing for the Kenyan job market",
  actions: [{ label: "Get Started", href: "/contact/" }],
};

const stats = [
  { value: "1k+", label: "CVs delivered" },
  { value: "98%", label: "ATS pass rate" },
  { value: "95%", label: "Client satisfaction" },
  { value: "72h", label: "Typical turnaround" },
];

const features = {
  items: [
    {
      title: "1k+ CVs delivered",
      body:
        "CVs written for graduates, mid-career professionals and senior leaders across Kenya.",
    },
    {
      title: "95% client satisfaction",
      body:
        "Consistent positive feedback and repeat engagements from local and diaspora clients.",
    },
    {
      title: "98% ATS pass rate",
      body:
        "Documents structured and keyworded for BrighterMonday, Fuzu and corporate portals.",
    },
    {
      title: "CV writing",
      body:
        "Achievement-led CVs tailored to your industry, level and target role.",
    },
    {
      title: "Cover letters",
      body:
        "Clear, targeted letters that connect your story to role requirements.",
    },
    {
      title: "LinkedIn optimisation",
      body:
        "Profiles tuned for recruiter search, credibility and personal brand.",
    },
  ],
};

const lead = {
  title: "Ready to get more interviews?",
  sub: "Choose a plan or talk to a specialist. No hidden fees, no subscriptions.",
  primaryHref: "/contact/",
  primaryLabel: "Get Started Today",
};

const isDev = import.meta.env.DEV;
const siteUrl = isDev ? "" : site.siteUrl;

const orgJsonLd = {
  "@context": "https://schema.org",
  "@type": "Organization",
  name: "Professional CV Writing Kenya",
  url: siteUrl || undefined,
};

const webJsonLd = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  name: "Professional CV Writing Kenya",
  url: siteUrl || undefined,
};
---

<BaseLayout {title} {description} {seo}>
  <!-- Hero -->
  <Hero {...hero} />

  <!-- Key metrics -->
  <section class="section" aria-label="Key metrics">
    <div class="container">
      <StatStrip stats={stats} />
    </div>
  </section>

  <!-- Services -->
  <FeatureList {...features} />

  <!-- Pricing preview -->
  <section class="section" id="pricing">
    <div class="container">
      <header class="section-head">
        <p class="section-head__eyebrow">Our Packages</p>
        <h2 class="h2 section-head__title">
          Transparent CV Writing Packages in Kenya
        </h2>
        <p class="section-head__sub">
          Choose the right package for your career stage. No hidden fees.
        </p>
      </header>
    </div>

    <!-- IMPORTANT: PricingTable rendered directly inside the section,
         not inside the container, so it uses its own band width
         exactly as on the Pricing page -->
    <PricingTable />
  </section>

  <!-- Social proof -->
  <TestimonialStrip {...testimonials} />

  <!-- Lead capture -->
  <LeadCaptureBanner {...lead} />

  <!-- SEO structured data -->
  <StructuredData type="Organization" data={orgJsonLd} />
  <StructuredData type="WebSite" data={webJsonLd} />

  <style>
    /* Apply two-row vertical spacing before + after this section */
    #pricing {
      margin-block: calc(var(--space-6) * 2);
    }

    /* Tight section head: eyebrow + h2 + subtitle with zero internal gaps */
    .section-head {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      gap: 0;
      margin-bottom: var(--space-5);
      width: 100%;
    }

    .section-head * {
      margin: 0;
      padding: 0;
    }

    .section-head__eyebrow {
      font-size: var(--fs-sm);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-weight: 600;
      color: var(--color-accent);
    }

    .section-head__sub {
      font-size: var(--fs-base);
      color: var(--color-text);
      width: 100%;
      max-width: none;
      display: block;
    }
  </style>
</BaseLayout>
