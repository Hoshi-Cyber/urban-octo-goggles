---
import BaseLayout from "../../components/layout/BaseLayout.astro";
import Hero from "../../components/sections/service/Hero/index.astro";
import PricingTable from "../../components/plan/PricingTable/index.astro";
import ComparisonMatrix from "../../components/plan/ComparisonMatrix/index.astro";
import FAQAccordion from "../../components/faq/FAQAccordion/index.astro";
import LeadCaptureBanner from "../../components/cta/LeadCaptureBanner/index.astro";
import StatStrip from "../../components/metrics/StatStrip/index.astro";
import Addons from "../../components/plan/Addons/index.astro";
import { getPricingFaqs } from "../../data/faqs/faqs.data";

const title = "Transparent CV Writing Packages in Kenya";
const description =
  "Four clear, one-time packages for CV, cover letter and LinkedIn optimisation — tailored to Kenyan jobseekers at every career stage.";
const seo = { canonical: "/pricing/" };

type FaqItem = {
  q: string;
  a: string;
};

// Key metrics
const stats = [
  { value: "1k+", label: "CVs delivered" },
  { value: "98%", label: "ATS pass rate" },
  { value: "95%", label: "Client satisfaction" },
  { value: "72h", label: "Typical turnaround" },
];

// Load pricing FAQs
const resolvedPricingFaqs = getPricingFaqs();

const rawPricingFaqItems = [
  ...resolvedPricingFaqs.topQuestions,
  ...resolvedPricingFaqs.groups.flatMap((group) => group.items),
];

const seenFaqIds = new Set<string>();
const pricingFaqItems: FaqItem[] = [];

for (const item of rawPricingFaqItems) {
  if (seenFaqIds.has(item.id)) continue;
  seenFaqIds.add(item.id);
  pricingFaqItems.push({ q: item.question, a: item.answer });
}
---

<BaseLayout {title} {description} {seo}>

  <Hero
    eyebrow="CV &amp; LinkedIn pricing, made clear"
    title={title}
    sub="Each package includes a professionally written, ATS-optimised CV plus the assets you need to stand out on LinkedIn, BrighterMonday, Fuzu and corporate portals."
    image="/assets/images/services/main-services-overview-hero-image.webp"
    alt="Pricing overview illustration showing CV, cover letter and LinkedIn profile on screen."
    meta={[
      { label: "Four packages aligned to career stage" },
      { label: "One-time professional fee per project" },
      { label: "Optional add-ons for LinkedIn and speed" },
    ]}
  />

  <section class="section" aria-label="Key metrics">
    <div class="container">
      <StatStrip stats={stats} />
    </div>
  </section>

  <!-- NEW PERFECTLY-TIGHT SECTION HEADER -->
  <section class="section" id="pricing">
    <div class="container">

      <header class="section-head">
        <p class="section-head__eyebrow">Our Packages</p>
        <h2 class="h2 section-head__title">Transparent CV Writing Packages in Kenya</h2>
        <p class="section-head__sub">
          Four clear, one-time project fees mapped to your career stage. Starter for graduates, Professional Impact for mid-level professionals, Advanced Growth for emerging leaders, and Executive Brand Suite for senior roles and diaspora searches.
        </p>
      </header>

      <PricingTable />
    </div>
  </section>

  <section class="section section--tight" aria-labelledby="compare">
    <div class="container">
      <h2 id="compare" class="h2">Compare what’s included in each package</h2>
      <ComparisonMatrix wide showHead={false} />
    </div>
  </section>

  <Addons
    sectionId="addons"
    categories={["addons", "speed"]}
    ctaHref="/contact/"
    ctaLabel="Add option"
    ctaVariant="link"
  />

  <section class="section section--tight" aria-labelledby="faq">
    <div class="container">
      <h2 id="faq" class="h2">FAQs</h2>
      <FAQAccordion items={pricingFaqItems} showHead={false} />
      <div class="text-center mt-8">
        <a href="/contact/" class="btn btn-accent" data-cta="pricing:contact">
          Discuss Your Project
        </a>
      </div>
    </div>
  </section>

  <section class="section section--tight">
    <div class="container">
      <LeadCaptureBanner
        title="Ready to get more interviews?"
        sub="Choose a plan now or talk to a specialist. No hidden fees."
        primaryHref="/contact/"
        primaryLabel="Get Started"
      />
    </div>
  </section>

  <style>
    /* Perfect zero-gap stack */
    .section-head {
      display: flex;
      flex-direction: column;
      /* stretch children to full available width */
      align-items: stretch;
      gap: 0;
      margin-bottom: var(--space-5);
      width: 100%;
    }

    .section-head .section-head__eyebrow,
    .section-head .section-head__title,
    .section-head .section-head__sub {
      margin: 0;
      padding: 0;
    }

    .section-head__eyebrow {
      font-size: var(--fs-sm);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-weight: 600;
      color: var(--color-accent);
    }

    .section-head__sub {
      font-size: var(--fs-base);
      color: var(--color-text);
      /* Ensure subtitle spans full section width */
      width: 100%;
      max-width: none;
      display: block;
    }

    .section--tight {
      padding-block: clamp(var(--space-4), 2vw, var(--space-6));
    }

    #pricing.section {
      padding-block-start: clamp(var(--space-6), 4vw, var(--space-8));
    }
  </style>

</BaseLayout>
