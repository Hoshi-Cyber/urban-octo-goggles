---
/**
 * File: src/components/plan/PricingTable/index.astro
 * CVWriting.co.ke â€“ 4-tier GTM packages (Kenya 2025)
 * Header removed completely (eyebrow, h2 title, subtitle).
 */

import defaultPricing from "../../../data/pricing.json";

export interface Plan {
  id: string;
  name: string;
  description?: string;
  priceRange: string;
  features: string[];
  ctaLabel: string;
  highlight?: boolean;
}

export interface Props {
  items?: Plan[];
  class?: string;
}

const {
  items,
  class: className = "",
} = Astro.props as Props;

const pricing: Plan[] = items ?? (defaultPricing as Plan[]);

import "./PricingTable.css";
---

<section
  class={`pricing container ${className}`.trim()}
  id="pricing"
  data-section="pricing"
>

  <!-- HEADER REMOVED -->

  <div class="pricing__grid">
    {pricing.map((plan) => (
      <article
        class={`pricing__card card ${
          plan.highlight ? "is-highlight" : ""
        }`.trim()}
        aria-labelledby={`plan-${plan.id}-title`}
        data-plan-id={plan.id}
      >
        {plan.highlight && (
          <p class="pricing__badge">
            <span class="pricing__badgeLabel">Most popular</span>
          </p>
        )}

        <header class="pricing__cardHead">
          <h3 id={`plan-${plan.id}-title`} class="pricing__planName">
            {plan.name}
          </h3>

          {plan.description && (
            <p class="pricing__planDesc">{plan.description}</p>
          )}

          <p class="pricing__price">
            <span class="sr-only">Price:</span>
            {plan.priceRange}
          </p>
        </header>

        <ul
          class="pricing__features"
          aria-label={`${plan.name} deliverables`}
        >
          {plan.features.map((feat) => (
            <li class="pricing__feature">{feat}</li>
          ))}
        </ul>

        <div class="pricing__actions">
          <a
            href={`/contact/?package=${encodeURIComponent(plan.id)}`}
            class="btn btn-primary pricing__cta"
            data-cta={`pricing-${plan.id}-cta`}
            aria-label={`Select ${plan.name} package`}
          >
            <span class="btn__inner">
              <span class="btn__label">{plan.ctaLabel}</span>
            </span>
          </a>
        </div>
      </article>
    ))}
  </div>
</section>
