---
// src/components/blog/compose/LeadMagnetStrip/index.astro
// Bottom-of-article / inline lead magnet strip with premium styling.

import sheet from "./LeadMagnetStrip.css?url";
import type { LeadMagnetStripProps } from "./types";

const {
  eyebrow,
  title,
  body,
  primaryCtaLabel,
  primaryCtaHref,
  secondaryCtaLabel,
  secondaryCtaHref,
  finePrint,
  id,
  className,
} = Astro.props as LeadMagnetStripProps;

const hasPrimaryCta =
  typeof primaryCtaLabel === "string" &&
  primaryCtaLabel.trim().length > 0 &&
  typeof primaryCtaHref === "string" &&
  primaryCtaHref.trim().length > 0;

const hasSecondaryCta =
  typeof secondaryCtaLabel === "string" &&
  secondaryCtaLabel.trim().length > 0 &&
  typeof secondaryCtaHref === "string" &&
  secondaryCtaHref.trim().length > 0;

const hasShellContent =
  (title && title.trim().length > 0) ||
  (body && body.trim().length > 0) ||
  hasPrimaryCta;

const headingId = id ? `${id}-leadmagnet-title` : "leadmagnet-title";
const hasTitle = Boolean(title && title.trim().length > 0);
const ariaLabel = hasTitle ? undefined : "Lead magnet";
---

<link rel="stylesheet" href={sheet} />

{hasShellContent && (
  <section
    class={`leadMagnet${className ? ` ${className}` : ""}`}
    id={id}
    aria-label={ariaLabel}
    aria-labelledby={hasTitle ? headingId : undefined}
    data-section="lead-magnet"
  >
    <div class="leadMagnet__inner">
      <div class="leadMagnet__copy">
        {eyebrow && (
          <p class="leadMagnet__eyebrow">
            {eyebrow}
          </p>
        )}

        {title && (
          <h2
            id={headingId}
            class="leadMagnet__title section-title h2"
          >
            {title}
          </h2>
        )}

        {body && (
          <p class="leadMagnet__body">
            {body}
          </p>
        )}

        {finePrint && (
          <p class="leadMagnet__finePrint">
            {finePrint}
          </p>
        )}
      </div>

      {(hasPrimaryCta || hasSecondaryCta) && (
        <div class="leadMagnet__actions">
          {hasPrimaryCta && (
            <a
              href={primaryCtaHref}
              class="leadMagnet__primaryCta"
            >
              {primaryCtaLabel}
            </a>
          )}

          {hasSecondaryCta && (
            <a
              href={secondaryCtaHref}
              class="leadMagnet__secondaryCta"
            >
              {secondaryCtaLabel}
            </a>
          )}
        </div>
      )}
    </div>
  </section>
)}
