---
// File: src/components/blog/compose/BlogHero/index.astro
/**
 * BlogHero â€” mobile-first hero with dual CTAs.
 * FP-148.1: remove badge/statline, show image in full.
 * FP-155: BaseLayout links global CSS once; component stays local-only.
 * FP-158: no inner horizontal gutters; block padding only; grid >= lg when media exists.
 */

export interface Cover { src: string; alt?: string; width?: number; height?: number }
export interface Props {
  title: string
  sub?: string
  primaryHref?: string
  primaryLabel?: string
  secondaryHref?: string
  secondaryLabel?: string
  cover?: Cover | null
  /** FP-158: default false to avoid nested containers/gutters */
  contained?: boolean
}

const {
  title,
  sub = "",
  primaryHref = "/contact/",
  primaryLabel = "Get Professional CV Help",
  secondaryHref = "/blog/",
  secondaryLabel = "Read Latest",
  cover = null,
  contained = false,
} = Astro.props as Props

// Local component CSS only
import css from "./BlogHero.css?url"

const titleId = "bloghero-title"
/** Grid should only activate at lg if media exists */
const hasMedia = Boolean(cover?.src)
---
<link rel="stylesheet" href={css} />

<section
  class="bloghero"
  data-section="blog-hero"
  data-contained={String(contained)}
  data-has-media={String(hasMedia)}
  aria-labelledby={titleId}
>
  {/*
    FP-158:
    - Do NOT add an inner .container here; rely on page-level container for gutters.
    - Single column by default; grid only at lg when media exists.
    - CTAs stack on mobile; row from sm+ (handled in CSS).
  */}
  <div class:list={[
    "bloghero__grid",
    hasMedia ? "has-media" : "no-media",
    contained ? "is-contained" : "is-uncontained",
  ]}>
    <div class="bloghero__copy">
      <h1 id={titleId} class="bloghero__title h1">{title}</h1>
      {sub && <p id="bloghero-dek" class="bloghero__sub">{sub}</p>}

      <div class="bloghero__ctas">
        <a
          href={primaryHref}
          class="btn btn-primary"
          data-cta="bloghero-primary"
          aria-describedby={sub ? "bloghero-dek" : undefined}
        >
          {primaryLabel}
        </a>
        <a
          href={secondaryHref}
          class="btn btn-accent"
          data-cta="bloghero-secondary"
          aria-describedby={sub ? "bloghero-dek" : undefined}
        >
          {secondaryLabel}
        </a>
      </div>
    </div>

    {hasMedia && (
      <figure class="bloghero__media" aria-hidden="true">
        <img
          src={cover!.src}
          alt={cover!.alt ?? ""}
          width={cover!.width ?? 960}
          height={cover!.height ?? 720}
          loading="eager"
          decoding="async"
        />
      </figure>
    )}
  </div>
</section>
