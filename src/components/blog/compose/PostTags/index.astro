---
import css from "./PostTags.css?url";

type Variant = "header" | "footer";

interface PostTagsProps {
  tags?: string[];
  variant?: Variant; // default: "header"
}

const { tags = [], variant = "header" } = Astro.props as PostTagsProps;

// Robust, local slugify for tag URLs
const slugify = (s: string) =>
  s
    .toLowerCase()
    .trim()
    .replace(/[\s\W-]+/g, "-")
    .replace(/^-+|-+$/g, "");
---
<link rel="stylesheet" href={css} />

{tags.length > 0 && (
  <ul
    class={`post__tags${variant === "footer" ? " post__tags--footer" : ""}`}
    aria-label="Tags"
  >
    {tags.slice(0, 12).map((t) => (
      <li>
        <a
          class="post__tag"
          href={`/blog/tag/${slugify(t)}/`}
          rel="tag"
          itemprop="keywords"
        >
          {t}
        </a>
      </li>
    ))}
  </ul>
)}
