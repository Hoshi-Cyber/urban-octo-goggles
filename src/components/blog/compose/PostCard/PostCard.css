/* File: src/components/blog/compose/PostCard/PostCard.css
   PostCard – premium blog card
   - Solid, token-driven surfaces (no harsh borders)
   - Calm hover motion
   - Clear hierarchy: media → category → title → excerpt → meta
*/

/* Card shell */
.pcard {
  inline-size: 100%;
  display: grid;
  grid-template-rows: auto 1fr;

  background-color: color-mix(
    in oklab,
    var(--color-surface, #ffffff) 92%,
    var(--color-surface-alt, #f9fafb) 8%
  );
  border: 1px solid
    color-mix(
      in oklab,
      var(--color-border-subtle, #e5e7eb) 88%,
      var(--color-primary-soft, var(--color-primary, #1b3637)) 12%
    );
  border-radius: var(--radius-2xl, 1.25rem);
  box-shadow: var(--shadow-sm);

  overflow: hidden;

  transition:
    transform 0.18s ease,
    box-shadow 0.18s ease,
    border-color 0.18s ease,
    background-color 0.18s ease;

  content-visibility: visible;
  contain-intrinsic-size: auto;
}

.pcard:hover,
.pcard:focus-within {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  border-color: color-mix(
    in oklab,
    var(--color-primary, #1b3637) 38%,
    var(--color-border-subtle, #e5e7eb)
  );
  background-color: color-mix(
    in oklab,
    var(--color-surface, #ffffff) 88%,
    var(--color-surface-alt, #f9fafb) 12%
  );
}

@media (prefers-reduced-motion: reduce) {
  .pcard {
    transition: none;
  }
}

/* Media – stable 16:9 box to prevent CLS */
.pcard__media {
  position: relative;
  --pcard-media-ratio: 16 / 9;
  aspect-ratio: var(--pcard-media-ratio);
  block-size: auto;

  background-color: color-mix(
    in oklab,
    var(--color-surface-alt, #f3f4f6) 90%,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 10%
  );
  border-bottom: 1px solid
    color-mix(
      in oklab,
      var(--color-border-subtle, #e5e7eb) 92%,
      var(--color-primary-soft, var(--color-primary, #1b3637)) 8%
    );
  overflow: hidden;
}

/* Fallback for browsers without aspect-ratio support */
@supports not (aspect-ratio: 1) {
  .pcard__media {
    block-size: auto;
  }
  .pcard__media::before {
    content: "";
    display: block;
    padding-top: calc(100% * 9 / 16);
  }
  .pcard__media > .pcard__mediaLink {
    position: absolute;
    inset: 0;
  }
}

.pcard__mediaLink {
  display: block;
  inline-size: 100%;
  block-size: 100%;
  outline: none;
}

.pcard__mediaLink img {
  inline-size: 100%;
  block-size: 100%;
  object-fit: cover;
  display: block;
  transition: transform 0.22s ease;
}

@media (prefers-reduced-motion: reduce) {
  .pcard__mediaLink img {
    transition: none;
  }
}

@media (hover: hover) {
  .pcard:hover .pcard__mediaLink img,
  .pcard:focus-within .pcard__mediaLink img {
    transform: scale(1.03);
  }
}

/* Stage badge */
.pcard__badge {
  position: absolute;
  inset: 0.75rem auto auto 0.75rem;

  display: inline-flex;
  align-items: center;
  padding-inline: 0.65rem;
  padding-block: 0.35rem;

  border-radius: 999px;
  background-color: #ffffff;
  color: var(--color-muted, #6b7280);
  border: 1px solid
    color-mix(in oklab, var(--color-text, #020617) 10%, transparent);

  font: 600 var(--fs-xs) / 1 var(--font-sans);
  letter-spacing: 0.06em;
  text-transform: uppercase;
  box-shadow: var(--shadow-xs);
}

/* Content */
.pcard__content {
  --pcard-pad: var(--space-4);
  display: grid;
  grid-template-rows: auto auto 1fr auto; /* cat, title, excerpt, meta */
  gap: 0.6rem;

  padding-block: var(--pcard-pad);
  padding-inline: calc(var(--pcard-pad) * 0.75); /* slightly reduced LR padding */
}

/* Category pill – smaller, lighter styling */
.pcard__kicker {
  margin-bottom: 0.1rem;
}

.pcard__category {
  display: inline-flex;
  align-items: center;
  padding-inline: 0.5rem;
  padding-block: 0.25rem;

  border-radius: 999px;
  background-color: color-mix(
    in oklab,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 10%,
    #ffffff
  );
  color: color-mix(
    in oklab,
    var(--color-primary, #1b3637) 70%,
    var(--color-text, #020617)
  );
  border: 1px solid
    color-mix(
      in oklab,
      var(--color-primary, #1b3637) 32%,
      transparent
    );

  font: 600 var(--fs-2xs, 0.72rem) / 1 var(--font-sans);
  letter-spacing: 0.06em;
  text-transform: uppercase;
  text-decoration: none;

  box-shadow: var(
    --shadow-xxs,
    0 1px 0 rgba(15, 23, 42, 0.04)
  );
}

.pcard__category:hover,
.pcard__category:focus-visible {
  background-color: color-mix(
    in oklab,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 16%,
    #ffffff
  );
  border-color: color-mix(
    in oklab,
    var(--color-primary, #1b3637) 50%,
    transparent
  );
  outline: none;
}

/* Title + title link */
.pcard__title {
  margin: 0;
  font-weight: 800;
  line-height: 1.2;
  font-size: clamp(
    calc(var(--fs-md) - 1px),
    1.9vw,
    calc(var(--fs-lg) - 1px)
  );
  color: var(--color-text, #020617);
}

.pcard__link {
  color: inherit;
  text-decoration: none;
  outline: none;
}

.pcard__link:hover,
.pcard__link:focus-visible {
  color: color-mix(
    in oklab,
    var(--color-primary, #1b3637) 85%,
    var(--color-text, #020617)
  );
  text-decoration: none; /* colour change only, no underline */
}

/* Excerpt – use main text colour (no muted) */
.pcard__excerpt {
  margin: 0;
  color: color-mix(
    in oklab,
    var(--color-text, #020617) 92%,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 8%
  );
  font-size: var(--fs-sm);
}

.pcard__excerpt.clamp-3,
.pcard__excerpt.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Meta row – clearer date/read pill */
.pcard__meta {
  margin: 0;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  align-self: flex-end;

  padding-block: 0.3rem;
  padding-inline: 0.7rem;

  border-radius: 999px;
  background-color: color-mix(
    in oklab,
    var(--color-surface-alt, #f9fafb) 88%,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 12%
  );
  border: 1px solid
    color-mix(
      in oklab,
      var(--color-border-subtle, #e5e7eb) 90%,
      var(--color-primary-soft, var(--color-primary, #1b3637)) 10%
    );

  font-size: var(--fs-xs, 0.8rem);
  color: color-mix(
    in oklab,
    var(--color-text, #020617) 82%,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 18%
  );
  letter-spacing: 0.02em;
  white-space: nowrap;
}

.pcard__meta time::after {
  content: "•";
  margin-inline: 0.5rem;
  color: color-mix(
    in oklab,
    var(--color-text, #020617) 70%,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 30%
  );
}

/* Clamp helpers */
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Breakpoints */
@media (min-width: 640px) {
  .pcard__content {
    --pcard-pad: var(--space-5);
    gap: 0.65rem;
  }
}

@media (min-width: 1024px) {
  .pcard__content {
    --pcard-pad: var(--space-6);
    gap: 0.7rem;
  }

  .pcard__title {
    font-size: clamp(var(--fs-md), 1.5vw, var(--fs-lg));
  }
}
