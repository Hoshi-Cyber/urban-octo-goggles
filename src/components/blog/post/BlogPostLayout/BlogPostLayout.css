/*
 * File: src/components/blog/post/BlogPostLayout/BlogPostLayout.css
 *
 * Fix Plan 205.2 – Consolidated single-post layout shell
 *
 * Role:
 * - Own the full vertical rhythm and section boundaries for the single blog post.
 * - Keep all spacing decisions here so BlogPost.astro and the route remain data-only.
 * - Apply a premium, brand-aligned visual banding for each major slice.
 *
 * Updated per Fix Plan 213 status:
 * - Maintain IA presets, slice ordering, and band responsibilities.
 * - Refine colour application for a neat, minimalist, premium blog layout.
 *
 * Updated per Fix Plan 213.1:
 * - Introduce a single shared content column width for the article body
 *   and closing bands, driven by --blog-post-content-max-width.
 * - Let .blog-post-layout__body-inner own the reading width; keep
 *   .blog-post-layout__content full-width inside that shell.
 *
 * Updated per Fix Plan 004 – Step 6:
 * - Introduce light-touch visual refinements per layout preset, keyed by
 *   data-layout-preset on the root .blog-post-layout article.
 * - Do not change structure; only adjust spacing and band tint subtly.
 */

@import "../../../../styles/tokens.css";
@import "../../../../styles/typography.css";

/* Root article wrapper */
.blog-post-layout {
  padding-block: clamp(var(--space-8), 6vw, var(--space-10));
  background-color: var(--color-surface, #ffffff);

  /* Fix Plan 213.1 – shared reading width for the column */
  --blog-post-content-max-width: 70ch;
}

/* Header stack: breadcrumbs, hero, cover, intro */
.blog-post-layout__header {
  /* Slightly reduced to avoid an over-tall header band after KeyTakeaways move */
  padding-block-end: clamp(var(--space-5), 3.5vw, var(--space-7));

  /* Soft, editorial header tint – very light use of primary */
  background:
    radial-gradient(
      circle at top left,
      color-mix(
        in oklab,
        var(--color-primary-soft, var(--color-primary, #1b3637)) 10%,
        transparent
      ),
      transparent 60%
    ),
    color-mix(
      in oklab,
      var(--color-surface, #ffffff) 94%,
      var(--color-surface-alt, #f9fafb) 6%
    );

  border-block-end: 1px solid
    color-mix(
      in oklab,
      var(--color-border-subtle, #e5e7eb) 92%,
      var(--color-primary-soft, var(--color-primary, #1b3637)) 8%
    );
}

/* TOC region (optional) – very light band just below header */
.blog-post-layout__toc {
  padding-block: clamp(var(--space-4), 3vw, var(--space-5));
  background-color: color-mix(
    in oklab,
    var(--color-surface-alt, #f9fafb) 96%,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 4%
  );
  border-block-end: 1px solid
    color-mix(
      in oklab,
      var(--color-border-subtle, #e5e7eb) 94%,
      var(--color-primary-soft, var(--color-primary, #1b3637)) 6%
    );
}

/* Main body */
.blog-post-layout__body {
  padding-block: clamp(var(--space-6), 4vw, var(--space-8));
  background-color: var(--color-surface, #ffffff);
}

/* Single content column shell */
.blog-post-layout__body-inner {
  width: 100%;
  max-width: var(--blog-post-content-max-width);
  margin-inline: auto;
  padding-inline: clamp(var(--space-4), 4vw, var(--space-8));
}

/* Prose inside the column – inherit shell width */
.blog-post-layout__content {
  max-width: 100%;
  margin: 0;
}

/* Checklist section (implementation checklist)
   Sits on a soft band that contrasts gently with the body */
.blog-post-layout__checklist {
  padding-block: clamp(var(--space-6), 4vw, var(--space-7));
  background-color: color-mix(
    in oklab,
    var(--color-surface-alt, #f9fafb) 96%,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 4%
  );
  border-block-start: 1px solid
    color-mix(
      in oklab,
      var(--color-border-subtle, #e5e7eb) 92%,
      var(--color-primary-soft, var(--color-primary, #1b3637)) 8%
    );
}

/* Inline offer (mid-article CTA)
   Slightly warmer band using accent, still restrained */
.blog-post-layout__inline-offer {
  padding-block: clamp(var(--space-6), 4vw, var(--space-7));
  background-color: color-mix(
    in oklab,
    var(--color-surface-alt, #f9fafb) 94%,
    var(--color-accent, #d4ab18) 6%
  );
  border-block-start: 1px solid
    color-mix(
      in oklab,
      var(--color-border-subtle, #e5e7eb) 90%,
      var(--color-accent, #d4ab18) 10%
    );
}

/* Social proof strip – subtle, cool band to separate testimonials */
.blog-post-layout__social-proof {
  padding-block: clamp(var(--space-6), 4vw, var(--space-7));
  background-color: color-mix(
    in oklab,
    var(--color-surface-alt, #f9fafb) 96%,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 4%
  );
}

/* FAQ block – near-body look with a light top border */
.blog-post-layout__faq {
  padding-block: clamp(var(--space-6), 4vw, var(--space-7));
  background-color: color-mix(
    in oklab,
    var(--color-surface, #ffffff) 94%,
    var(--color-surface-alt, #f9fafb) 6%
  );
  border-block-start: 1px solid
    color-mix(
      in oklab,
      var(--color-border-subtle, #e5e7eb) 92%,
      var(--color-primary-soft, var(--color-primary, #1b3637)) 8%
    );
}

/* Final CTA (bottom hard CTA)
   Strongest band on the page, but still readable and calm */
.blog-post-layout__final-cta {
  padding-block: clamp(var(--space-8), 5vw, var(--space-10));
  background-color: color-mix(
    in oklab,
    var(--color-primary, #1b3637) 10%,
    var(--color-surface-alt, #f9fafb)
  );
}

/* Related articles strip – closing band with light structure */
.blog-post-layout__related {
  padding-block: clamp(var(--space-6), 4vw, var(--space-8));
  background-color: color-mix(
    in oklab,
    var(--color-surface-alt, #f9fafb) 96%,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 4%
  );
  border-block-start: 1px solid
    color-mix(
      in oklab,
      var(--color-border-subtle, #e5e7eb) 94%,
      var(--color-primary-soft, var(--color-primary, #1b3637)) 6%
    );
}

/* Fix Plan 213.1 – align closing bands to the same content column */
.blog-post-layout__checklist > .container,
.blog-post-layout__inline-offer > .container,
.blog-post-layout__final-cta > .container,
.blog-post-layout__related > .container {
  max-width: var(--blog-post-content-max-width);
  margin-inline: auto;
}

/* Larger screens – tighten rhythm and widen reading width slightly */
@media (min-width: 768px) {
  .blog-post-layout {
    padding-block: clamp(var(--space-9), 7vw, var(--space-12));
    --blog-post-content-max-width: 72ch;
  }

  .blog-post-layout__body {
    padding-block: clamp(var(--space-7), 4.5vw, var(--space-9));
  }
}

@media (min-width: 1024px) {
  .blog-post-layout {
    --blog-post-content-max-width: 76ch;
  }

  .blog-post-layout__header {
    padding-block-end: clamp(var(--space-7), 4.5vw, var(--space-9));
  }
}

/* Reduced motion – keep layout static if motion is added later */
@media (prefers-reduced-motion: reduce) {
  .blog-post-layout__header {
    background-color: color-mix(
      in oklab,
      var(--color-surface, #ffffff) 94%,
      var(--color-surface-alt, #f9fafb) 6%
    );
    background-image: none;
  }
}

/* --------------------------------------------------------------------------
 * Fix Plan 004 – Step 6
 * Preset-specific visual refinements (light-touch, non-breaking)
 *
 * Assumes the root article exposes data-layout-preset with one of:
 *  - "conversionArticle"
 *  - "editorialArticle"
 *  - "analysisArticle"
 *  - "shortInsight"
 *  - "campaignLanding"
 *
 * If data-layout-preset is not present, all defaults above apply as-is.
 * ------------------------------------------------------------------------ */

/* conversionArticle
 * - Default behaviour (no overrides required).
 * - Full banding: checklist, inlineOffer, socialProof, FAQ, finalCta, related.
 */

/* editorialArticle
 * - Softer, more narrative. Reduce band contrast and vertical rhythm.
 */
.blog-post-layout[data-layout-preset="editorialArticle"] .blog-post-layout__body {
  padding-block: clamp(var(--space-5), 3.5vw, var(--space-6));
}

.blog-post-layout[data-layout-preset="editorialArticle"] .blog-post-layout__toc {
  background-color: var(--color-surface, #ffffff);
  border-block-end: 1px solid var(--color-border-subtle, #e5e7eb);
}

.blog-post-layout[data-layout-preset="editorialArticle"]
  .blog-post-layout__inline-offer {
  background-color: color-mix(
    in oklab,
    var(--color-surface-alt, #f9fafb) 98%,
    var(--color-accent, #d4ab18) 2%
  );
}

.blog-post-layout[data-layout-preset="editorialArticle"]
  .blog-post-layout__related {
  background-color: var(--color-surface, #ffffff);
  border-block-start: 1px solid var(--color-border-subtle, #e5e7eb);
}

/* analysisArticle
 * - Emphasise structure and TOC; keep conversion bands present but calmer.
 */
.blog-post-layout[data-layout-preset="analysisArticle"] .blog-post-layout__toc {
  background-color: color-mix(
    in oklab,
    var(--color-surface-alt, #f9fafb) 92%,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 8%
  );
}

.blog-post-layout[data-layout-preset="analysisArticle"]
  .blog-post-layout__checklist {
  background-color: color-mix(
    in oklab,
    var(--color-surface-alt, #f9fafb) 94%,
    var(--color-primary-soft, var(--color-primary, #1b3637)) 6%
  );
}

/* shortInsight
 * - Compact, lightweight. Reduce spacing and band intensity.
 */
.blog-post-layout[data-layout-preset="shortInsight"] {
  padding-block: clamp(var(--space-6), 4vw, var(--space-8));
}

.blog-post-layout[data-layout-preset="shortInsight"] .blog-post-layout__body {
  padding-block: clamp(var(--space-4), 3vw, var(--space-5));
}

.blog-post-layout[data-layout-preset="shortInsight"]
  .blog-post-layout__final-cta {
  padding-block: clamp(var(--space-6), 4vw, var(--space-7));
}

.blog-post-layout[data-layout-preset="shortInsight"]
  .blog-post-layout__related {
  background-color: var(--color-surface, #ffffff);
  border-block-start: 1px solid var(--color-border-subtle, #e5e7eb);
}

/* campaignLanding
 * - Stronger emphasis on checklist + final CTA bands.
 */
.blog-post-layout[data-layout-preset="campaignLanding"]
  .blog-post-layout__checklist {
  background-color: color-mix(
    in oklab,
    var(--color-accent, #d4ab18) 10%,
    var(--color-surface-alt, #f9fafb) 90%
  );
}

.blog-post-layout[data-layout-preset="campaignLanding"]
  .blog-post-layout__final-cta {
  background-color: color-mix(
    in oklab,
    var(--color-primary, #1b3637) 14%,
    var(--color-surface-alt, #f9fafb)
  );
}
