---
import "./Hero.css";

export interface Action {
  label: string;
  href: string;
}

export interface MetaItem {
  label: string;
}

export interface Props {
  title: string;
  sub?: string;
  eyebrow?: string;
  image?: string;
  alt?: string;
  actions?: Action[];
  /**
   * Optional meta strip items rendered under the hero copy.
   * Use for short “how this works” / key promise bullets.
   */
  meta?: MetaItem[];
}

const {
  title,
  sub,
  eyebrow,
  image,
  alt = "",
  actions = [],
  meta = [],
} = Astro.props as Props;

const hasActions = Array.isArray(actions) && actions.length > 0;
const hasMeta = Array.isArray(meta) && meta.length > 0;
const hasImage = typeof image === "string" && image.length > 0;
---

<section
  class="hero section"
  data-section="service-hero"
  aria-labelledby="service-hero-title"
>
  <div class="container hero__grid">
    <header class="hero__header">
      {eyebrow && <p class="eyebrow">{eyebrow}</p>}

      <h1 id="service-hero-title" class="h1">
        {title}
      </h1>

      {sub && <p class="hero__sub">{sub}</p>}

      {hasActions && (
        <div class="hero__actions" aria-label="Primary actions">
          {actions.map((a) => (
            <a
              href={a.href}
              class="btn btn-primary"
              data-cta={`hero:${a.label}`}
            >
              {a.label}
            </a>
          ))}
        </div>
      )}

      {hasMeta && (
        <div class="hero__meta-strip" aria-label="Key highlights">
          {meta.map((item) => (
            <div class="hero__meta-item">
              <span class="hero__meta-icon" aria-hidden="true"></span>
              <span>{item.label}</span>
            </div>
          ))}
        </div>
      )}
    </header>

    {hasImage && (
      <div class="hero__media-section" aria-hidden={alt ? "false" : "true"}>
        <figure class="hero__media">
          <img
            src={image}
            alt={alt}
            width="1200"
            height="900"
            loading="eager"
            decoding="async"
            fetchpriority="high"
          />
        </figure>
      </div>
    )}
  </div>
</section>
