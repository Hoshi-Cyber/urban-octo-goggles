---
/**
 * File: src/components/sections/shared/TestimonialCard/index.astro
 *
 * Purpose (Fix Plan 205.1 â€“ Social proof strip):
 * - Provide the testimonial card component used by SocialProofStrip.
 * - Flexible: works with either props (quote/content/name/role/context)
 *   or with a fallback <slot>.
 */

const props = Astro.props as {
  quote?: string;
  content?: string;
  name?: string;
  role?: string;
  context?: string;
};

const quoteText =
  (typeof props.quote === "string" && props.quote.trim().length > 0
    ? props.quote
    : typeof props.content === "string" && props.content.trim().length > 0
    ? props.content
    : "") || "";
---

<figure class="testimonial-card">
  {quoteText ? (
    <blockquote class="testimonial-card__quote">
      {quoteText}
    </blockquote>
  ) : (
    <blockquote class="testimonial-card__quote">
      <slot />
    </blockquote>
  )}

  {(props.name || props.role || props.context) && (
    <figcaption class="testimonial-card__meta">
      {props.name && (
        <span class="testimonial-card__name">
          {props.name}
        </span>
      )}
      {props.role && (
        <span class="testimonial-card__role">
          {props.role}
        </span>
      )}
      {props.context && (
        <span class="testimonial-card__context">
          {props.context}
        </span>
      )}
    </figcaption>
  )}
</figure>
